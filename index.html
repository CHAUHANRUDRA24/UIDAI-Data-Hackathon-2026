<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="UIDAI Analytics Dashboard - Enrolment Insights">
    <title>Dashboard | UIDAI Analytics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body>
    <div class="app-container">


        <!-- Main Content -->
        <main class="main-content">
            <!-- Header (Top Bar) -->
            <header class="top-header">
                <div>
                    <h1 class="page-title">Enrolment Analytics / ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§® ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</h1>
                    <p class="page-subtitle">Regional distribution and age-wise breakdown / ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§µ‡§ø‡§§‡§∞‡§£ ‡§î‡§∞ ‡§Ü‡§Ø‡•Å-‡§µ‡§æ‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</p>
                </div>
                <div class="header-actions">
                    <button class="action-btn" id="shareBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                        </svg>
                        Share / ‡§∂‡•á‡§Ø‡§∞
                    </button>
                    <button class="action-btn" id="exportBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        Export PDF / ‡§™‡•Ä‡§°‡•Ä‡§è‡§´ ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§
                    </button>
                    <a href="#" id="uploadLink" class="primary-btn blue">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Upload New / ‡§®‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§°
                    </a>
                    <!-- Hidden file input for dashboard upload -->
                    <input type="file" id="dashboardFileUpload" accept=".csv,.zip" hidden>
                </div>
            </header>

            <!-- Loading System -->
            <div id="loadingState" class="loading-overlay">
                <div class="spinner"></div>
                <p>Analyzing datasets... / ‡§°‡•á‡§ü‡§æ‡§∏‡•á‡§ü ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£...</p>
            </div>

            <!-- Dashboard Content (Accordion Style) -->
            <div id="dashboardContent" class="dashboard-accordion">

                <!-- Section 1: Snapshot (Expanded by default) -->
                <div class="accordion-item active">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <span class="accordion-icon blue">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <rect x="3" y="3" width="7" height="7" />
                                    <rect x="14" y="3" width="7" height="7" />
                                    <rect x="14" y="14" width="7" height="7" />
                                    <rect x="3" y="14" width="7" height="7" />
                                </svg>
                            </span>
                            <h3>Current Snapshot: High-Level Indicators / ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§®‡•à‡§™‡§∂‡•â‡§ü: ‡§â‡§ö‡•ç‡§ö-‡§∏‡•ç‡§§‡§∞‡•Ä‡§Ø ‡§∏‡§Ç‡§ï‡•á‡§§‡§ï</h3>
                        </div>
                        <span class="accordion-chevron">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9" />
                            </svg>
                        </span>
                    </div>

                    <div class="accordion-body">
                        <div class="snapshot-grid">
                            <!-- Card 1 -->
                            <div class="clean-card">
                                <div class="card-top">
                                    <span class="card-label">Total Enrolments / ‡§ï‡•Å‡§≤ ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§®</span>
                                    <span class="trend-badge positive">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                                            <polyline points="17 6 23 6 23 12" />
                                        </svg>
                                    </span>
                                </div>
                                <div class="card-value" id="totalEnrolments">-</div>
                                <div class="card-subtext positive">
                                    ‚Üë 2.4% <span class="text-muted">vs last period</span>
                                </div>
                            </div>

                            <!-- Card 2 -->
                            <div class="clean-card">
                                <div class="card-top">
                                    <span class="card-label">MoM Growth / ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø</span>
                                    <span class="trend-badge neutral">~</span>
                                </div>
                                <div class="card-value" id="momGrowthVal">+2.4%</div>
                                <div class="card-subtext text-muted">
                                    Steady upward trend observed in rural sectors.
                                </div>
                            </div>

                            <!-- Card 3 -->
                            <div class="clean-card highlight-border">
                                <div class="card-top">
                                    <span class="card-label">Total Updates / ‡§ï‡•Å‡§≤ ‡§Ö‡§™‡§°‡•á‡§ü</span>
                                    <span class="trend-badge warning">!</span>
                                </div>
                                <div class="card-value" id="totalUpdates">-</div>
                                <div class="card-subtext error">
                                    High Backlog detected
                                </div>
                            </div>

                            <!-- Card 4 -->
                            <div class="clean-card">
                                <div class="card-top">
                                    <span class="card-label">Enrolment/Update Ratio / ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§®/‡§Ö‡§™‡§°‡•á‡§ü ‡§Ö‡§®‡•Å‡§™‡§æ‡§§</span>
                                    <span class="trend-badge neutral">‚óè</span>
                                </div>
                                <div class="card-value" id="ratioVal">1:3.6</div>
                                <div class="card-subtext text-muted">
                                    Updates significantly outpace new enrolments.
                                </div>
                            </div>

                            <!-- Card 5 -->
                            <div class="clean-card">
                                <div class="card-top">
                                    <span class="card-label">Most Active Region / ‡§∏‡§¨‡§∏‡•á ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞</span>
                                    <span class="trend-badge blue">üìç</span>
                                </div>
                                <div class="card-value sm" id="topState">-</div>
                                <div class="tag-pill blue">High Volume / ‡§â‡§ö‡•ç‡§ö ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ</div>
                            </div>
                        </div>

                        <!-- Injected Insights (User Feature) -->
                        <div id="insightsContainer" class="insights-grid" style="margin-top: 1.5rem;"></div>

                        <div class="accordion-footer">
                            <a href="#" class="link-btn">View Detailed Report ‚Üí / ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§¶‡•á‡§ñ‡•á‡§Ç ‚Üí</a>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Section 2: Trends That Matter (User's Workspace) -->
            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <div class="accordion-title-group">
                        <span class="accordion-icon blue"> #2 </span>
                        <h3>Second Layer: Trends That Matter / ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§∏‡•ç‡§§‡§∞: ‡§∞‡•Å‡§ù‡§æ‡§® ‡§ú‡•ã ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡•á ‡§π‡•à‡§Ç</h3>
                    </div>
                    <span class="accordion-chevron">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9" />
                        </svg>
                    </span>
                </div>
                <div class="accordion-body hidden-charts-area">
                    <!-- All 4 Charts Required by User -->
                    <div class="charts-grid-2">
                        <!-- Chart 1: Enrolment Trends -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Enrolment Growth / ‡§®‡§æ‡§Æ‡§æ‡§Ç‡§ï‡§® ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="enrolmentTrendChart"></canvas>
                            </div>
                            <div class="chart-footer">
                                <p class="chart-explanation">Enrolment activity peaks between March-May every year.
                                </p>
                            </div>
                        </div>

                        <!-- Chart 2: Update Trends -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Updates Over Time / ‡§∏‡§Æ‡§Ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§™‡§°‡•á‡§ü</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="updatesTrendChart"></canvas>
                            </div>
                            <div class="chart-footer">
                                <p class="chart-explanation">Biometric updates show a steady 15% increase.</p>
                            </div>
                        </div>

                        <!-- Chart 3: Region-wise Activity -->
                        <div class="chart-card wide">
                            <div class="chart-header">
                                <h3>Region-wise Activity / ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞-‡§µ‡§æ‡§∞ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="regionBarChart"></canvas>
                            </div>
                            <div class="chart-footer">
                                <p class="chart-explanation">Northern states contribute 45% of total document
                                    updates.</p>
                            </div>
                        </div>

                        <!-- Chart 4: Demographic vs Biometric -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Update Distribution / ‡§Ö‡§™‡§°‡•á‡§ü ‡§µ‡§ø‡§§‡§∞‡§£</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="updateTypeChart"></canvas>
                            </div>
                            <div class="chart-footer">
                                <p class="chart-explanation">Demographic changes outweigh biometric updates by 2:1.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Custom Algorithms (User Feature) -->
            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <div class="accordion-title-group">
                        <span class="accordion-icon blue"> #3 </span>
                        <h3>Third Layer: AI Insights / ‡§§‡•Ä‡§∏‡§∞‡§æ ‡§∏‡•ç‡§§‡§∞: ‡§è‡§Ü‡§à ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø</h3>
                    </div>
                    <span class="accordion-chevron">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9" />
                        </svg>
                    </span>
                </div>
                <div class="accordion-body">
                    <div id="customAlgorithmsContainer" class="algorithms-grid"></div>
                </div>
            </div>

    </div>
    </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="dashboard.js"></script>
</body>

</html>